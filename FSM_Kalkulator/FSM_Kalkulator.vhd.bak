LIBRARY IEEE;
USE IEEE.std_logic_1164.all;
USE IEEE.std_logic_arith.all;

entity FSM_kalkulator IS
	generic ( N : INTEGER := 7);
	port (
		REG_A			: in std_logic_vector (N-1 downto 0) ;
		REG_B			: in std_logic_vector (N-1 downto 0) ;
		ModeSistem		: in std_logic_vector (2 downto 0) ;
		clk				: in std_logic ;
		St_Kalkulator	: in std_logic ;
		isP				: in std_logic ;
		isQ				: in std_logic ;
		S				: out std_logic ;
		rst				: out std_logic ;
		CA				: out std_logic (1 downto 0) ;
		CB				: out std_logic (1 downto 0) ;
		CS				: out std_logic (1 downto 0) ;
		MP, MQ 			: out std_logic (1 downto 0) ;
		);
end FSM_kalkulator;

architecture kalulator_arc of FSM_kalkulator is


begin
	process (REG_A, REG_B, ModeSistem, clk, St_Kalkulator)
	begin 
	if (R /= "0" or rst = '1') then
		cState <= A ;
	elsif (rising_edge(clk)) then
		cState <= nState ;
	end if ;
	
		case cState is
			
			when A => -- Mengisi Reg_A dan Reg_B
				if (R = "1") then
					nState <= B ;
				end if ;
			when B => -- Ubah Mux_A dan Mux_B menjadi 0
				
				nState <= C ;
			
			when C => -- Memasukan Hasil ke Reg_S setleah St_Kalkulator = 1
			
				if (isP = 1) then 
					nState <= D ;
				elsif (isQ = 1) then 
					nState <= D2 ;
				end if ;
			
			when D1 => -- Mengubah MuxA menjadi 1, isP = 1
				
				nState <= E
				
			when D2 => -- Mengubah MuxB menjadi 1, isQ = 1
				
				nState <= E
			
			when 
				
			
			
		